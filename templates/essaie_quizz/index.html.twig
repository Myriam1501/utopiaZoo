{% extends 'base.html.twig' %}

{% block title %}Hello EssaieQuizzController!{% endblock %}

{% block body %}
    <br>
    <br>
    <div class="example-wrapper2">
        <div class="quizz">

            <div class="count">
            </div>


            <div class="questions" id="question">
            </div>

        <div class="reponses">

            <button class="reponse" onclick="" id="option1" >option1</button>
            <button class="reponse" id="option2" >option2</button>
            <button class="reponse" id="option3">option3</button>

        </div>
            <button class="next">Next</button>
        </div>

    </div>

    <style>

        .example-wrapper2 {
            font-family: "Georgia", Times, serif;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            align-items: flex-start;
            align-content: center;
        }


        .quizz {
            text-align: center;
            width: 550px;
            height: 400px;
            border-radius: 5%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            box-shadow: 0 20px 20px rgba(0, 0, 0, 0.3);

            display: flex;
            flex-direction: column;
            flex-wrap: nowrap;
            justify-content: center;
            align-content: center;
            align-items: center;
        }

        .quizz:hover {
            transform: scale(1.1);
            -webkit-transition: all 400ms ease-out;
            -moz-transition: all 400ms ease-out;
            -o-transition: all 400ms ease-out;
            -ms-transition: all 400ms ease-out;
            transition: all 400ms ease-out;
        }


        .questions{
            padding: 7px 49px;
            background-color: whitesmoke;
            cursor: pointer;
            margin-bottom: 10px;
            color: #4C3017;
            font-family: Georgia, serif;
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.3);
            font-size: 14px;
            border-radius: 3px;
            font-weight: 200;
            border: none;
            width: 400px;

        }

        .reponse{
            padding: 7px 49px;
            background-color: whitesmoke;
            cursor: pointer;
            margin-bottom: 10px;
            color: #4C3017;
            font-family: Georgia, serif;
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.3);
            font-size: 14px;
            border-radius: 3px;
            font-weight: 200;
            border: none;
        }
        .next{
            padding: 7px 49px;
            background-color: whitesmoke;
            cursor: pointer;
            margin-bottom: 10px;
            color: #4C3017;
            font-family: Georgia, serif;
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.3);
            font-size: 14px;
            border-radius: 3px;
            font-weight: 200;
            border: none;
        }

    </style>

<script>

    const Questions = [{
        id: 0,
        quest: "Premiere question",
        resp: [{ text: "Reponse 1", isCorrect: false },
            { text: "Reponse 2", isCorrect: false },
            { text: "Reponse 3", isCorrect: true }
        ]

    },
        {
            id: 1,
            quest: "Deuxieme question",
            resp: [{ text: "Reponse 1", isCorrect: false},
                { text: "Reponse 2", isCorrect: true },
                { text: "Reponse 3", isCorrect: false }
            ]

        },
        {
            id: 2,
            quest: "Troisieme question",
            resp: [{ text: "Reponse 1", isCorrect: false },
                { text: "Reponse 2", isCorrect: false },
                { text: "Reponse 3", isCorrect: true }
            ]

        },
        {
            id: 3,
            quest: "Quatrieme question",
            resp: [{ text: "Reponse 1", isCorrect: false },
                { text: "Reponse 2", isCorrect: false },
                { text: "Reponse 3", isCorrect: true }
            ]

        },
        {
            id: 4,
            quest: "Cinquieme question",
            resp: [{ text: "Reponse 1", isCorrect: false },
                { text: "Reponse 2", isCorrect: false },
                { text: "Reponse 3", isCorrect: true }
            ]

        },
        {
            id: 5,
            quest: "",
            resp: [ {text: "", isCorrect: false },
            { text: "", isCorrect: false },
            { text: "", isCorrect: true }]
            }
    ]

    var start = true;

    var score = 0;

    var resultat = document.getElementsByClassName("count");

    const next = document.getElementsByClassName("next")[0];

    function quiz(id) {

        resultat[0].innerText = "";

        const question = document.getElementById("question");

        question.innerText = Questions[id].quest;

        const option1 = document.getElementById('option1');
        const option2 = document.getElementById('option2');
        const option3 = document.getElementById('option3');

        option1.innerText = Questions[id].resp[0].text;
        option1.value = Questions[id].resp[0].isCorrect;

        option2.innerText = Questions[id].resp[1].text;
        option2.value = Questions[id].resp[1].isCorrect;

        option3.innerText = Questions[id].resp[2].text;
        option3.value = Questions[id].resp[2].isCorrect;

        var saisis = "";

        option1.addEventListener("click", () => {
            option1.style.backgroundColor = "pink";
            saisis = option1.value;
        })

        option2.addEventListener("click", () => {
            option2.style.backgroundColor = "pink";
            saisis = option2.value;
        })

        option3.addEventListener("click", () => {
            option3.style.backgroundColor = "pink";
            saisis = option3.value;
        })

        const evaluate = document.getElementsByClassName("next");

        evaluate[0].addEventListener("click", () => {
            if (saisis == "true") {
                score++;
            }
        })
    }

    if (start) {
        quiz("0");
    }

    var id = 0;

    next.addEventListener("click", () => {

        start = false;

        if (id < 5) {
            id++;
            console.log(id);
            quiz(id);
        }
        if(id == 5) {
            resultat[0].innerHTML = "Votre score est de: " + score.toString();
        }
    })

</script>

    <br>
    <br>
{% endblock %}
